# Memo

## 1
hrsh7th

- nvim-cmp
  + 機能
    * カラフルな補完メニュー
    * LSPの定義に存在しないテキスト(選んだときに挿入されるテキスト)を補完する機能
  + 置き換える部分の検出
    1. 正規表現でキーワード検索
    2. 
    3. ヒューリスティックな実装
  + TextEditを返さないとき
    * vscodeではvscode-intelephenseで実装
    * nvim-cmpでは
      1. keyword text is vari
      2. buffer text is $vari
      3. preview test is $variable
  + 問題
    1. The commitCharacters
    2. auto-pairsとの衝突
      - 旧キーをハイジャックして解決
      - 新vim.on_key
      - ハッキーな実装は時間とともに不要になっていく
  + FOSS Challenges
    * 個人的に必要な機能とユーザーが必要な機能のすれ違い
      - ユーザは新しい機能よりも安定した挙動を求める
      - 責任感が生まれて燃え尽き症候群
    * コミュニティ運営
      - メンテナとしてはコントリビュータを信頼できない
    * サプライチェーン攻撃
      - コミットの中にマルウェアが存在した
      - 自分が攻撃の標的になる

- スポンサーLT_vim-jpラジオ
  + 単位系としてのHHKB(35000円)
  + エンジニアの楽園vim-jpラジオ

- TabPanel Feature
  + rbtnn(Naru-san)
  + TabPanel とは
    * 一般的なエディタでは：タブごとにファイルが関連付けられる
    * vimではタブがタブページにひも付き、タブページが複数のファイルに関連付けられる
    * TabePanelはvimの一機能
    * ver p.1.1391でパッチがマージされた
    * NeoVimには移植していない
  + モチベーション&背景
    * 最初はvimの機能が知りたかった
    * TabPanelが欲しかった
    * 機能を追加するにはvimをforkしてコンフリクトが起きないように機能を調べなければいけない
    * それがモチベーションになった
    * 標準機能のTabLineが使いづらい
  + デザイン
    * 改行ができるようにした
  + 機能
    * 座標をずらす、カラムの値をTabPanel分ずらす愚直な実装にした
    * 色々な環境で動作できるように編集した
    * 最初はTabPanelのコマンドライン表示時にTabPanel上にpopupウィンドウを表示する実装を考えた
    * popupwindowの関数を変更しなければいけなく、影響範囲が大きいので諦めた
    * 画面描写などのタイミングのデバッグが大変だった
    * vimは行志向のエディタなので、ソースコードにその処理が残っている
    * TabPanelでは行の移動に影響が出て実装が難しかった
    * 愚直な実装なのでプルリクを送るか5年迷った
    * 個人でのコード最適化が難しいからプルリクを送ったらマージされた
    * 自分一人で作った機能が必要とされるかは不安になる
  + tabpanel option
    * 改行を入れて複数行表示できる
    * showtabpanel
      - 0,1,2でTabPanelをどのように表示するかを切り替える
    * tabpanelopt option
      - align,columns,vertでTabPanelの位置や区切り文字などの表示を設定する
